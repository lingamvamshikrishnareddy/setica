<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Join Waitlist | Setica - Be the First to Know</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollToPlugin.min.js"></script>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  
  <style>
    .loader-wrapper { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #111; display: flex; justify-content: center; align-items: center; z-index: 9999; transition: opacity 0.5s ease-out, visibility 0.5s ease-out; }
    .loader { border: 8px solid #f3f3f3; border-top: 8px solid #3498db; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .loaded .loader-wrapper { opacity: 0; visibility: hidden; }

    .footer-love { display: flex; align-items: center; gap: 10px; background-color: rgba(255, 255, 255, 0.08); padding: 8px 15px; border-radius: 20px; cursor: pointer; transition: background-color 0.3s ease; user-select: none; }
    .footer-love:hover { background-color: rgba(255, 255, 255, 0.15); }
    .footer-love .heart-icon { color: #ff4757; font-size: 1.1rem; transition: transform 0.2s ease; }
    .footer-love.loved .heart-icon { transform: scale(1.2); }
    .footer-love .love-count { font-weight: 600; font-size: 0.9rem; color: var(--text-color); }
    .footer-love .love-text { font-size: 0.9rem; color: var(--text-muted); }

    .page-header {
      min-height: 300px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      position: relative;
      padding: 120px 5% 60px;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
      overflow: hidden;
    }

    .page-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 20% 50%, rgba(74, 85, 255, 0.1) 0%, transparent 50%),
                  radial-gradient(circle at 80% 80%, rgba(255, 111, 0, 0.1) 0%, transparent 50%);
      z-index: 0;
    }

    .page-header .header-content {
      position: relative;
      z-index: 5;
    }

    .page-header h1 {
      font-size: clamp(2.2rem, 5vw, 3.5rem);
      color: var(--text-color);
      margin-bottom: 1rem;
      background: linear-gradient(135deg, #4A55FF, #ff6f00, #4A55FF);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: gradientShift 8s ease infinite;
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .page-header p {
      font-size: clamp(1rem, 2vw, 1.2rem);
      max-width: 700px;
      margin: 0 auto;
      color: rgba(255, 255, 255, 0.85);
    }

    .waitlist-section {
      padding: 80px 5%;
      background: linear-gradient(to bottom, var(--dark-card), var(--dark-bg));
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 60vh;
    }

    .waitlist-container {
      position: relative;
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      padding: clamp(30px, 5vw, 50px);
      border-radius: 24px;
      max-width: 550px;
      width: 100%;
      text-align: center;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.08);
      overflow: hidden;
    }

    .waitlist-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(74, 85, 255, 0.05) 0%, rgba(255, 111, 0, 0.05) 100%);
      opacity: 0.5;
      z-index: 0;
      pointer-events: none;
    }

    .waitlist-container > * {
      position: relative;
      z-index: 1;
    }

    .waitlist-container h2 {
      color: var(--text-color);
      margin-bottom: 15px;
      font-size: clamp(1.8rem, 4vw, 2.5rem);
    }

    .waitlist-container > p {
      color: var(--text-muted);
      margin-bottom: 30px;
      font-size: 0.95rem;
    }

    .waitlist-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 30px;
    }

    .waitlist-form input[type="email"] {
      padding: 15px 20px;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background-color: rgba(255, 255, 255, 0.05);
      color: var(--text-color);
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    .waitlist-form input[type="email"]:focus {
      outline: none;
      border-color: var(--primary-color);
      background-color: rgba(255, 255, 255, 0.08);
      box-shadow: 0 0 0 3px rgba(74, 85, 255, 0.3);
    }

    .waitlist-form .btn-primary {
      padding: 15px 20px;
      font-size: 1rem;
      border-radius: 12px;
      background: linear-gradient(135deg, #4A55FF, #6366f1);
      transition: all 0.3s ease;
    }

    .waitlist-form .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(74, 85, 255, 0.4);
    }

    .stats-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 25px;
      margin-top: 40px;
      padding-top: 30px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* Glassmorphism Stat Cards - Matching Services Style */
    .stat-box {
      position: relative;
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      padding: 25px 20px;
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
      overflow: hidden;
    }

    .stat-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(74, 85, 255, 0.05) 0%, rgba(255, 111, 0, 0.05) 100%);
      opacity: 0;
      transition: opacity 0.4s ease;
      z-index: 0;
      pointer-events: none;
    }

    .stat-box:hover::before {
      opacity: 1;
    }

    /* Animated Border */
    .stat-box::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 20px;
      padding: 2px;
      background: linear-gradient(135deg, #4A55FF, #ff6f00, #4A55FF);
      background-size: 200% 200%;
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      opacity: 0;
      transition: opacity 0.4s ease;
      animation: borderMove 3s linear infinite;
    }

    @keyframes borderMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .stat-box:hover::after {
      opacity: 1;
    }

    .stat-box:hover {
      transform: translateY(-5px);
      background: rgba(255, 255, 255, 0.05);
      border-color: rgba(255, 255, 255, 0.15);
      box-shadow: 0 20px 60px rgba(74, 85, 255, 0.2);
    }

    .stat-box > * {
      position: relative;
      z-index: 1;
    }

    .stat-box p {
      font-size: 0.85rem;
      margin-bottom: 12px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 500;
    }

    .stat-number {
      font-size: 2.8rem;
      font-weight: 700;
      background: linear-gradient(135deg, #4A55FF, #6366f1);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      display: block;
      line-height: 1;
      margin-bottom: 15px;
      transition: transform 0.3s ease;
    }

    .stat-box:hover .stat-number {
      transform: scale(1.1);
    }

    .stat-box.waitlist-stat .stat-number {
      background: linear-gradient(135deg, #ff6f00, #f59e0b);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    #interested-btn {
      background: rgba(255, 255, 255, 0.08);
      color: var(--text-color);
      border: 1px solid rgba(255, 255, 255, 0.15);
      padding: 10px 20px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.3s ease;
      border-radius: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    #interested-btn:hover:not(:disabled) {
      background: rgba(74, 85, 255, 0.2);
      border-color: rgba(74, 85, 255, 0.4);
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(74, 85, 255, 0.3);
    }

    #interested-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
      background-color: rgba(46, 204, 113, 0.2);
      border-color: rgba(46, 204, 113, 0.3);
    }

    #interested-btn i {
      margin-right: 8px;
    }

    .form-message {
      padding: 12px;
      margin-bottom: 20px;
      border-radius: 10px;
      font-size: 0.9rem;
      display: none;
      font-weight: 500;
    }

    .form-message.success {
      background-color: rgba(46, 204, 113, 0.2);
      color: #2ecc71;
      border: 1px solid #2ecc71;
    }

    .form-message.error {
      background-color: rgba(231, 76, 60, 0.2);
      color: #e74c3c;
      border: 1px solid #e74c3c;
    }

    @media (max-width: 768px) {
      .stats-container {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .stat-number {
        font-size: 2.2rem;
      }
    }

    .stars, .twinkling { position: absolute; top: 0; left: 0; right: 0; bottom: 0; width: 100%; height: 100%; display: block; z-index: 0;}
    .stars { background: #000 url(https://www.script-tutorials.com/demos/360/images/stars.png) repeat top center; z-index: 0; }
    .twinkling{ background: transparent url(https://www.script-tutorials.com/demos/360/images/twinkling.png) repeat top center; z-index: 1; animation: move-twink-back 200s linear infinite; }
    @keyframes move-twink-back { from {background-position:0 0;} to {background-position:-10000px 5000px;} }
  </style>
</head>
<body class="loading">
  <div class="loader-wrapper">
    <div class="loader"></div>
  </div>

  <nav>
    <div class="nav-container">
      <div class="logo">
        <a href="index.html"><img src="openart-image_9Aq3L7vH_1744551909797_raw.jpg" alt="Setica Logo"></a>
      </div>
      <div class="nav-links">
        <a href="solutions.html">Solutions</a>
        <a href="about.html">About</a>
        <a href="products.html">Products</a>
        <a href="services.html">Services</a>
        <a href="join-waitlist.html" class="btn btn-primary mobile-cta-button">Join Waitlist</a>
      </div>
      <div class="love-button-container" id="love-it-button">
        <span class="heart-icon">❤️</span>
        <span class="love-count" id="love-counter">0</span>
      </div>
      <div class="cta-buttons">
        <a href="join-waitlist.html" class="btn btn-primary active" id="nav-start-free">Join Waitlist</a>
      </div>
      <div class="hamburger">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </nav>

  <header class="page-header">
    <div class="stars"></div>
    <div class="twinkling"></div>
    <div class="header-content">
      <h1>Join the Setica Waitlist</h1>
      <p>Be among the first to experience the future of integrated life management. Sign up for exclusive updates and early access.</p>
    </div>
  </header>

  <section class="waitlist-section">
    <div class="waitlist-container">
      <h2>Get Early Access</h2>
      <p>Enter your email below to reserve your spot and receive notifications about our launch.</p>
      <div id="form-message-area" class="form-message"></div>
      <form id="waitlist-form" class="waitlist-form" action="#" method="POST">
        <input type="email" id="email" name="email" placeholder="Enter your email address" required>
        <button type="submit" class="btn btn-primary">Join Waitlist Now</button>
      </form>
      
      <div class="stats-container">
        <div class="stat-box interest-stat">
          <p>People Interested</p>
          <span class="stat-number" id="interest-count">0</span>
          <button id="interested-btn" class="btn btn-secondary">
            <i class="fas fa-heart"></i>I'm Interested!
          </button>
        </div>
        
        <div class="stat-box waitlist-stat">
          <p>On Waitlist</p>
          <span class="stat-number" id="waitlist-count">0</span>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="footer-container">
      <div class="footer-left">
        <img src="openart-image_9Aq3L7vH_1744551909797_raw.jpg" alt="Setica Logo">
        <p>Copyright © <span id="copyright-year">2024</span> Setica.<br>All rights reserved.</p>
        <p style="margin-top: 15px; font-size: 0.8rem;">An open-source initiative.</p>
      </div>
      <div class="footer-links">
        <div class="footer-column">
          <h3>Platform</h3>
          <ul>
            <li><a href="solutions.html">Solutions</a></li>
            <li><a href="products.html">Product Roadmap</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="about.html">About Setica</a></li>
          </ul>
        </div>
        <div class="footer-column" id="resources">
          <h3>Resources</h3>
          <ul>
            <li><a href="https://github.com/lingamvamshikrishnareddy/setica" target="_blank" rel="noopener noreferrer">GitHub Repository</a></li>
            <li><a href="#">Documentation (Upcoming)</a></li>
            <li><a href="#">API Reference (Upcoming)</a></li>
            <li><a href="#">Contribution Guide</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>Company</h3>
          <ul>
            <li><a href="about.html">About Us</a></li>
            <li><a href="#">Careers (Coming Soon)</a></li>
            <li><a href="mailto:lingamvamshikrishnareddy@gmail.com">Contact</a></li>
            <li><a href="#">Privacy Policy</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-social">
        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
        <a href="https://github.com/lingamvamshikrishnareddy/setica" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><i class="fab fa-github"></i></a>
        <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
      </div>
    </div>
    <div class="footer-bottom">
      <p>Made with <i class="fas fa-heart heart-icon"></i> and Open Source principles. Site developed with assistance from Claude.</p>
      <div class="footer-love" id="love-it-button-footer">
        <span class="love-text">Loved it?</span>
        <span class="heart-icon">❤️</span>
        <span class="love-count" id="love-counter-footer">0</span>
      </div>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const body = document.body;

      // Firebase Configuration
      const firebaseConfig = {
        apiKey: "AIzaSyAQVWWGPkJjhxPBKSE5S1ctKcckKXjNze8",
        authDomain: "setica-eca6f.firebaseapp.com",
        projectId: "setica-eca6f",
        storageBucket: "setica-eca6f.firebasestorage.app",
        messagingSenderId: "340229638947",
        appId: "1:340229638947:web:35578617c902b1d26f1a96",
        measurementId: "G-S8878DTBRL"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore();

      // Loader
      window.addEventListener('load', () => {
        body.classList.remove('loading');
        body.classList.add('loaded');
      });

      // Copyright year
      const yearSpan = document.getElementById('copyright-year');
      if (yearSpan) yearSpan.textContent = new Date().getFullYear();

      // Mobile menu
      const hamburger = document.querySelector('.hamburger');
      const navLinks = document.querySelector('.nav-links');
      if (hamburger && navLinks) {
        hamburger.addEventListener('click', () => {
          hamburger.classList.toggle('active');
          navLinks.classList.toggle('active');
        });
      }

      // Love counter (both nav and footer)
      const loveButton = document.getElementById('love-it-button');
      const loveButtonFooter = document.getElementById('love-it-button-footer');
      const loveCounterSpan = document.getElementById('love-counter');
      const loveCounterFooter = document.getElementById('love-counter-footer');
      let currentLoveCount = parseInt(localStorage.getItem('seticaLoveCount') || '0');
      let userHasLoved = localStorage.getItem('seticaLovedState') === 'true';

      function updateLoveDisplay() {
        if (loveCounterSpan) loveCounterSpan.textContent = currentLoveCount;
        if (loveCounterFooter) loveCounterFooter.textContent = currentLoveCount;
        if (loveButton) loveButton.classList.toggle('loved', userHasLoved);
        if (loveButtonFooter) loveButtonFooter.classList.toggle('loved', userHasLoved);
      }

      function handleLoveClick(button) {
        if (!userHasLoved) {
          currentLoveCount++;
          localStorage.setItem('seticaLoveCount', currentLoveCount);
          localStorage.setItem('seticaLovedState', 'true');
          userHasLoved = true;
          updateLoveDisplay();
          if (typeof gsap !== 'undefined') {
            gsap.fromTo(button.querySelector('.heart-icon'),
              { scale: 1 },
              { scale: 1.4, duration: 0.3, ease: 'back.out(3)', yoyo: true, repeat: 1 }
            );
          }
        }
      }

      if (loveButton) {
        updateLoveDisplay();
        loveButton.addEventListener('click', () => handleLoveClick(loveButton));
      }

      if (loveButtonFooter) {
        loveButtonFooter.addEventListener('click', () => handleLoveClick(loveButtonFooter));
      }

      // Nav scroll effect
      const nav = document.querySelector('nav');
      if (nav && typeof ScrollTrigger !== 'undefined') {
        ScrollTrigger.create({
          start: "top top",
          end: 99999,
          onUpdate: (self) => nav.classList.toggle('scrolled', self.scroll() > 50)
        });
      }

      // === WAITLIST & INTEREST LOGIC ===
      const waitlistForm = document.getElementById('waitlist-form');
      const messageArea = document.getElementById('form-message-area');
      const emailInput = document.getElementById('email');
      const interestButton = document.getElementById('interested-btn');
      const interestCountSpan = document.getElementById('interest-count');
      const waitlistCountSpan = document.getElementById('waitlist-count');

      const userInterestedKey = 'seticaUserInterested';
      let userHasClickedInterest = localStorage.getItem(userInterestedKey) === 'true';

      // Fetch and display counts
      async function fetchCounts() {
        try {
          // Get interest count
          const interestDoc = await db.collection('stats').doc('interest').get();
          const interestCount = interestDoc.exists ? interestDoc.data().count : 0;
          
          // Get waitlist count
          const waitlistSnapshot = await db.collection('waitlist').get();
          const waitlistCount = waitlistSnapshot.size;

          // Animate counts
          if (interestCountSpan && typeof gsap !== 'undefined') {
            gsap.to(interestCountSpan, {
              duration: 1,
              innerText: interestCount,
              roundProps: "innerText",
              ease: "power1.out"
            });
          } else if (interestCountSpan) {
            interestCountSpan.textContent = interestCount;
          }

          if (waitlistCountSpan && typeof gsap !== 'undefined') {
            gsap.to(waitlistCountSpan, {
              duration: 1,
              innerText: waitlistCount,
              roundProps: "innerText",
              ease: "power1.out"
            });
          } else if (waitlistCountSpan) {
            waitlistCountSpan.textContent = waitlistCount;
          }

          updateInterestButton();
        } catch (error) {
          console.error("Error fetching counts:", error);
        }
      }

      function updateInterestButton() {
        if (interestButton) {
          if (userHasClickedInterest) {
            interestButton.disabled = true;
            interestButton.innerHTML = '<i class="fas fa-check"></i> Thanks!';
          } else {
            interestButton.disabled = false;
            interestButton.innerHTML = '<i class="fas fa-heart"></i> I\'m Interested!';
          }
        }
      }

      // Interest button click
      if (interestButton) {
        interestButton.addEventListener('click', async () => {
          if (!userHasClickedInterest) {
            try {
              // Increment interest count in Firestore
              const interestRef = db.collection('stats').doc('interest');
              await db.runTransaction(async (transaction) => {
                const doc = await transaction.get(interestRef);
                const newCount = (doc.exists ? doc.data().count : 0) + 1;
                transaction.set(interestRef, { count: newCount });
                return newCount;
              });

              userHasClickedInterest = true;
              localStorage.setItem(userInterestedKey, 'true');
              
              // Refresh counts
              await fetchCounts();

              // Animation
              if (typeof gsap !== 'undefined') {
                gsap.fromTo(interestButton, 
                  { scale: 1 }, 
                  { scale: 1.05, duration: 0.2, yoyo: true, repeat: 1 }
                );
                gsap.fromTo(interestCountSpan,
                  { scale: 1 },
                  { scale: 1.2, duration: 0.3, yoyo: true, repeat: 1, ease: 'back.out(2)' }
                );
              }
            } catch (error) {
              console.error("Error incrementing interest:", error);
              showMessage('An error occurred. Please try again.', 'error');
            }
          }
        });
      }

      // Waitlist form submission
      if (waitlistForm && emailInput) {
        waitlistForm.addEventListener('submit', async (e) => {
          e.preventDefault();
          const email = emailInput.value.trim().toLowerCase();

          // Validate email
          if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
            showMessage('Please enter a valid email address.', 'error');
            return;
          }

          const submitButton = waitlistForm.querySelector('button[type="submit"]');
          const originalButtonText = submitButton.innerHTML;
          submitButton.disabled = true;
          submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';

          try {
            // Check if email already exists
            const existingEmail = await db.collection('waitlist')
              .where('email', '==', email)
              .get();

            if (!existingEmail.empty) {
              showMessage('This email is already on the waitlist!', 'error');
              submitButton.disabled = false;
              submitButton.innerHTML = originalButtonText;
              return;
            }

            // Add to waitlist
            await db.collection('waitlist').add({
              email: email,
              timestamp: firebase.firestore.FieldValue.serverTimestamp(),
              source: 'website'
            });

            showMessage('Success! You\'ve joined the waitlist. Check your email soon!', 'success');
            emailInput.value = '';
        
        // Refresh counts
        await fetchCounts();

      } catch (error) {
        console.error("Error adding to waitlist:", error);
        showMessage('An error occurred. Please try again.', 'error');
      } finally {
        submitButton.disabled = false;
        submitButton.innerHTML = originalButtonText;
      }
    });
  }

  function showMessage(text, type) {
    if (!messageArea) return;
    
    messageArea.textContent = text;
    messageArea.className = `form-message ${type}`;
    messageArea.style.display = 'block';

    setTimeout(() => {
      messageArea.style.display = 'none';
    }, 5000);
  }

  // Initial fetch
  fetchCounts();
});
  </script>
</body>
</html>
